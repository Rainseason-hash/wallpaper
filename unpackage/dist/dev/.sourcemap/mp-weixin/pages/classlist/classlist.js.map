{"version":3,"file":"classlist.js","sources":["pages/classlist/classlist.vue","../../HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY2xhc3NsaXN0L2NsYXNzbGlzdC52dWU"],"sourcesContent":["<template>\n\t<view class=\"classlist\">\n\t\t<view class=\"loadingLayout\" v-if=\"!classList.length && !noData\">\n\t\t\t<uni-load-more status=\"loading\"></uni-load-more>\n\t\t</view>\n\t\t<view class=\"content\">\n\t\t\t<navigator :url=\"'/pages/detail/detail?id=' + item._id\" class=\"item\" v-for=\"item in classList\" :key=\"item._id\">\n\t\t\t\t<image :src=\"item.smallPicurl\" mode=\"aspectFill\"></image>\n\t\t\t</navigator>\n\t\t</view>\n\t\t<view class=\"loadingLayout\" v-if=\"classList.length || noData\">\n\t\t\t<uni-load-more :status=\"noData ? 'noMore' : 'loading'\"></uni-load-more>\n\t\t</view>\n\t</view>\n\t<view class=\"safe-area-inset-bottom\"></view>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\n// onReachBottom是触底\nimport { onLoad, onUnload, onReachBottom, onShareAppMessage, onShareTimeline } from '@dcloudio/uni-app';\nimport { apiGetClassList, apiGetHistoryList } from '@/api/apis.js';\nimport { goHome } from '@/utils/common.js';\nconst classList = ref([]);\nconst noData = ref(false);\nconst queryParams = {\n\tpageNum: 1,\n\tpageSize: 12\n};\n//分享给好友\nonShareAppMessage((e) => {\n\treturn {\n\t\ttitle: '小茉莉壁纸',\n\t\tpath: '/pages/classlist/classlist?id=' + queryParams.classid + '&name=' + queryParams.name\n\t};\n});\n//分享给朋友圈\nonShareTimeline((e) => {\n\treturn {\n\t\ttitle: '笨鸟',\n\t\t// 是参数不是path\n\t\tquery: \"id=' + queryParams.classid + '&name=' + queryParams.name\"\n\t};\n});\nonLoad((e) => {\n\tconsole.log(e); //获取到id\n\tlet { id = null, name = null, type = null } = e; //解构\n\t// if (!id) goHome();\n\tif (type) queryParams.type = type;\n\tif (id) queryParams.classid = id;\n\tqueryParams.name = name;\n\tuni.setNavigationBarTitle({\n\t\ttitle: name\n\t});\n\tgetClassList(); //onload调用顺序在setup之后，所以需要放在onload中，setup执行时就会略过生命周期函数，拿不到参数\n});\nonUnload(() => {\n\tuni.removeStorageSync('classList');\n});\nonReachBottom(() => {\n\tif (noData.value) return; //没有数据了就不发请求了\n\tqueryParams.pageNum++;\n\tgetClassList();\n});\n//获取分类列表\nconst getClassList = async () => {\n\tlet res;\n\t// 根据参数classid和type区分\n\tif (queryParams.classid) res = await apiGetClassList(queryParams);\n\tif (queryParams.type) res = await apiGetHistoryList(queryParams);\n\tclassList.value = [...classList.value, ...res.data];\n\tif (queryParams.pageSize > res.data.length) {\n\t\tnoData.value = true;\n\t}\n\tuni.setStorageSync('classList', classList.value);\n\tconsole.log(res);\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.classlist {\n\t.content {\n\t\tdisplay: grid;\n\t\tgrid-template-columns: repeat(3, 1fr);\n\t\tgap: 5rpx;\n\t\tpadding: 5rpx;\n\t\t.item {\n\t\t\theight: 440rpx;\n\t\t\timage {\n\t\t\t\twidth: 100%;\n\t\t\t\theight: 100%;\n\t\t\t\tdisplay: block;\n\t\t\t}\n\t\t}\n\t}\n}\n</style>\n","import MiniProgramPage from 'D:/program files/HBuilderX.4.76.2025082103/Project/wallPaper/pages/classlist/classlist.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","onShareAppMessage","onShareTimeline","onLoad","uni","onUnload","onReachBottom","apiGetClassList","apiGetHistoryList"],"mappings":";;;;;;;;;;;;;;AAuBA,UAAA,YAAAA,cAAAA,IAAA,CAAA,CAAA;AACA,UAAA,SAAAA,cAAAA,IAAA,KAAA;AACA,UAAA,cAAA;AAAA,MACA,SAAA;AAAA,MACA,UAAA;AAAA,IACA;AAEAC,kBAAA,kBAAA,CAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA,QACA,MAAA,mCAAA,YAAA,UAAA,WAAA,YAAA;AAAA,MACA;AAAA,IACA,CAAA;AAEAC,kBAAA,gBAAA,CAAA,MAAA;AACA,aAAA;AAAA,QACA,OAAA;AAAA;AAAA,QAEA,OAAA;AAAA,MACA;AAAA,IACA,CAAA;AACAC,kBAAA,OAAA,CAAA,MAAA;AACAC,oBAAAA,MAAA,MAAA,OAAA,uCAAA,CAAA;AACA,UAAA,EAAA,KAAA,MAAA,OAAA,MAAA,OAAA,KAAA,IAAA;AAEA,UAAA;AAAA,oBAAA,OAAA;AACA,UAAA;AAAA,oBAAA,UAAA;AACA,kBAAA,OAAA;AACAA,oBAAAA,MAAA,sBAAA;AAAA,QACA,OAAA;AAAA,MACA,CAAA;AACA;IACA,CAAA;AACAC,kBAAAA,SAAA,MAAA;AACAD,0BAAA,kBAAA,WAAA;AAAA,IACA,CAAA;AACAE,kBAAAA,cAAA,MAAA;AACA,UAAA,OAAA;AAAA;AACA,kBAAA;AACA;IACA,CAAA;AAEA,UAAA,eAAA,YAAA;AACA,UAAA;AAEA,UAAA,YAAA;AAAA,cAAA,MAAAC,SAAA,gBAAA,WAAA;AACA,UAAA,YAAA;AAAA,cAAA,MAAAC,SAAA,kBAAA,WAAA;AACA,gBAAA,QAAA,CAAA,GAAA,UAAA,OAAA,GAAA,IAAA,IAAA;AACA,UAAA,YAAA,WAAA,IAAA,KAAA,QAAA;AACA,eAAA,QAAA;AAAA,MACA;AACAJ,oBAAAA,MAAA,eAAA,aAAA,UAAA,KAAA;AACAA,oBAAAA,MAAA,MAAA,OAAA,uCAAA,GAAA;AAAA,IACA;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3EA,GAAG,WAAW,eAAe;"}